<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Path Planning Results</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
        }

        #panel {
            width: 100%;
            display: flex;
            flex-direction: column;
        }

        #routeInfo {
            display: flex;
            justify-content: space-around;
            padding: 10px;
            background: #f4f4f4;
        }

        .info-box {
            text-align: center;
        }

        .info-box span {
            display: block;
            font-size: 1.2em;
            font-weight: bold;
        }

        #map {
            height: 80vh;
            width: 100%;
            margin: 10px 0;
            opacity: 0.9;
        }

        #rankButtons {
            display: flex;
            justify-content: center;
            margin: 10px;
        }

        .rank-btn {
            margin: 0 5px;
            padding: 10px 15px;
            background: #007BFF;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .rank-btn.active {
            background: #0056b3;
        }

        .rank-btn:hover {
            background: #0066cc;
        }

        .popup {
            font-size: 1em;
        }
    </style>
</head>
<body>
<div id="panel">
    <!-- Buttons for Route Ranking -->
    <div id="rankButtons">
        <button class="rank-btn" onclick="showRoute(1)" id="rank1">Rank 1</button>
        <button class="rank-btn" onclick="showRoute(2)" id="rank2">Rank 2</button>
        <button class="rank-btn" onclick="showRoute(3)" id="rank3">Rank 3</button>
    </div>

    <!-- Route Information -->
    <div id="routeInfo">
        <div class="info-box">
            <span id="totalDistance">0 m</span>
            Total Distance
        </div>
        <div class="info-box">
            <span id="totalDuration">0 sec</span>
            Total Duration
        </div>
        <div class="info-box">
            <span id="avgVelocity">0 m/s</span>
            Average Velocity
        </div>
    </div>

    <!-- Map Container -->
    <div id="map"></div>
</div>

<!-- Leaflet.js -->
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

<script>
    const routes = [{'route_rank': 1, 'path': [{'REPORT_ID': 'WALKING', 'DURATION_IN_SEC': 53.0, 'POINT_1_LNG': 10.21284, 'POINT_1_LAT': 56.16184, 'POINT_2_LNG': 10.21197608217426, 'POINT_2_LAT': 56.161017815103236, 'VELOCITY': 2.0}, {'REPORT_ID': '190100', 'DURATION_IN_SEC': 202.0, 'POINT_1_LNG': 10.21197608217426, 'POINT_1_LAT': 56.161017815103236, 'POINT_2_LNG': 10.209599775463175, 'POINT_2_LAT': 56.14892750591274, 'VELOCITY': 7.4}, {'REPORT_ID': '179009', 'DURATION_IN_SEC': 49.0, 'POINT_1_LNG': 10.20872971106246, 'POINT_1_LAT': 56.144719132186395, 'POINT_2_LNG': 10.209599775463175, 'POINT_2_LAT': 56.14892750591274, 'VELOCITY': 9.7}, {'REPORT_ID': '206475', 'DURATION_IN_SEC': 48.0, 'POINT_1_LNG': 10.204415905418273, 'POINT_1_LAT': 56.14171141881423, 'POINT_2_LNG': 10.20872971106246, 'POINT_2_LAT': 56.144719132186395, 'VELOCITY': 9.9}, {'REPORT_ID': '179038', 'DURATION_IN_SEC': 36.0, 'POINT_1_LNG': 10.1989185595246, 'POINT_1_LAT': 56.14063267124548, 'POINT_2_LNG': 10.204415905418273, 'POINT_2_LAT': 56.14171141881423, 'VELOCITY': 10.0}, {'REPORT_ID': '206131', 'DURATION_IN_SEC': 62.0, 'POINT_1_LNG': 10.192723647815683, 'POINT_1_LAT': 56.1417522836526, 'POINT_2_LNG': 10.1989185595246, 'POINT_2_LAT': 56.14063267124548, 'VELOCITY': 8.1}, {'REPORT_ID': '206184', 'DURATION_IN_SEC': 72.0, 'POINT_1_LNG': 10.192723647815683, 'POINT_1_LAT': 56.1417522836526, 'POINT_2_LNG': 10.186632644180236, 'POINT_2_LAT': 56.13959744418457, 'VELOCITY': 10.3}, {'REPORT_ID': '190206', 'DURATION_IN_SEC': 46.0, 'POINT_1_LNG': 10.186632644180236, 'POINT_1_LAT': 56.13959744418457, 'POINT_2_LNG': 10.179150601188667, 'POINT_2_LAT': 56.13844851575673, 'VELOCITY': 11.1}, {'REPORT_ID': '184675', 'DURATION_IN_SEC': 89.0, 'POINT_1_LNG': 10.179150601188667, 'POINT_1_LAT': 56.13844851575673, 'POINT_2_LNG': 10.166163050262412, 'POINT_2_LAT': 56.131053962866226, 'VELOCITY': 12.9}, {'REPORT_ID': 'WALKING', 'DURATION_IN_SEC': 64.8, 'POINT_1_LNG': 10.166163050262412, 'POINT_1_LAT': 56.131053962866226, 'POINT_2_LNG': 10.164431, 'POINT_2_LAT': 56.130402, 'VELOCITY': 2.0}], 'total_duration': 721.7, 'total_distance': 5941.4, 'average_velocity': 8.2}, {'route_rank': 2, 'path': [{'REPORT_ID': 'WALKING', 'DURATION_IN_SEC': 53.0, 'POINT_1_LNG': 10.21284, 'POINT_1_LAT': 56.16184, 'POINT_2_LNG': 10.21197608217426, 'POINT_2_LAT': 56.161017815103236, 'VELOCITY': 2.0}, {'REPORT_ID': '190100', 'DURATION_IN_SEC': 202.0, 'POINT_1_LNG': 10.21197608217426, 'POINT_1_LAT': 56.161017815103236, 'POINT_2_LNG': 10.209599775463175, 'POINT_2_LAT': 56.14892750591274, 'VELOCITY': 7.4}, {'REPORT_ID': '179009', 'DURATION_IN_SEC': 49.0, 'POINT_1_LNG': 10.20872971106246, 'POINT_1_LAT': 56.144719132186395, 'POINT_2_LNG': 10.209599775463175, 'POINT_2_LAT': 56.14892750591274, 'VELOCITY': 9.7}, {'REPORT_ID': '206475', 'DURATION_IN_SEC': 48.0, 'POINT_1_LNG': 10.204415905418273, 'POINT_1_LAT': 56.14171141881423, 'POINT_2_LNG': 10.20872971106246, 'POINT_2_LAT': 56.144719132186395, 'VELOCITY': 9.9}, {'REPORT_ID': '179038', 'DURATION_IN_SEC': 36.0, 'POINT_1_LNG': 10.1989185595246, 'POINT_1_LAT': 56.14063267124548, 'POINT_2_LNG': 10.204415905418273, 'POINT_2_LAT': 56.14171141881423, 'VELOCITY': 10.0}, {'REPORT_ID': '206131', 'DURATION_IN_SEC': 62.0, 'POINT_1_LNG': 10.192723647815683, 'POINT_1_LAT': 56.1417522836526, 'POINT_2_LNG': 10.1989185595246, 'POINT_2_LAT': 56.14063267124548, 'VELOCITY': 8.1}, {'REPORT_ID': '206078', 'DURATION_IN_SEC': 62.0, 'POINT_1_LNG': 10.186880262565637, 'POINT_1_LAT': 56.14251885276732, 'POINT_2_LNG': 10.192723647815683, 'POINT_2_LAT': 56.1417522836526, 'VELOCITY': 8.4}, {'REPORT_ID': '184703', 'DURATION_IN_SEC': 60.0, 'POINT_1_LNG': 10.179336344162948, 'POINT_1_LAT': 56.138322977998705, 'POINT_2_LNG': 10.186880262565637, 'POINT_2_LAT': 56.14251885276732, 'VELOCITY': 11.0}, {'REPORT_ID': '184649', 'DURATION_IN_SEC': 93.0, 'POINT_1_LNG': 10.166318618385276, 'POINT_1_LAT': 56.13096577062022, 'POINT_2_LNG': 10.179336344162948, 'POINT_2_LAT': 56.138322977998705, 'VELOCITY': 12.4}, {'REPORT_ID': 'WALKING', 'DURATION_IN_SEC': 66.4, 'POINT_1_LNG': 10.166318618385276, 'POINT_1_LAT': 56.13096577062022, 'POINT_2_LNG': 10.164431, 'POINT_2_LAT': 56.130402, 'VELOCITY': 2.0}], 'total_duration': 731.3, 'total_distance': 5876.6, 'average_velocity': 8.0}, {'route_rank': 3, 'path': [{'REPORT_ID': 'WALKING', 'DURATION_IN_SEC': 47.1, 'POINT_1_LNG': 10.21284, 'POINT_1_LAT': 56.16184, 'POINT_2_LNG': 10.2121812711639, 'POINT_2_LAT': 56.16107681293822, 'VELOCITY': 2.0}, {'REPORT_ID': '182683', 'DURATION_IN_SEC': 75.0, 'POINT_1_LNG': 10.2121812711639, 'POINT_1_LAT': 56.16107681293822, 'POINT_2_LNG': 10.207060089618722, 'POINT_2_LAT': 56.16816672029917, 'VELOCITY': 11.3}, {'REPORT_ID': '187774', 'DURATION_IN_SEC': 90.0, 'POINT_1_LNG': 10.207060089618722, 'POINT_1_LAT': 56.16816672029917, 'POINT_2_LNG': 10.201380373016264, 'POINT_2_LAT': 56.17122707649042, 'VELOCITY': 7.1}, {'REPORT_ID': '180872', 'DURATION_IN_SEC': 43.0, 'POINT_1_LNG': 10.201380373016264, 'POINT_1_LAT': 56.17122707649042, 'POINT_2_LNG': 10.194338714120931, 'POINT_2_LAT': 56.16945046812791, 'VELOCITY': 11.2}, {'REPORT_ID': '180926', 'DURATION_IN_SEC': 67.0, 'POINT_1_LNG': 10.194338714120931, 'POINT_1_LAT': 56.16945046812791, 'POINT_2_LNG': 10.185844404928275, 'POINT_2_LAT': 56.163969409207326, 'VELOCITY': 12.1}, {'REPORT_ID': '180980', 'DURATION_IN_SEC': 45.0, 'POINT_1_LNG': 10.185844404928275, 'POINT_1_LAT': 56.163969409207326, 'POINT_2_LNG': 10.182659856483497, 'POINT_2_LAT': 56.15898299999999, 'VELOCITY': 13.4}, {'REPORT_ID': '181034', 'DURATION_IN_SEC': 38.0, 'POINT_1_LNG': 10.182659856483497, 'POINT_1_LAT': 56.15898299999999, 'POINT_2_LNG': 10.182616305557303, 'POINT_2_LAT': 56.15498346925998, 'VELOCITY': 11.8}, {'REPORT_ID': '181088', 'DURATION_IN_SEC': 43.0, 'POINT_1_LNG': 10.182616305557303, 'POINT_1_LAT': 56.15498346925998, 'POINT_2_LNG': 10.183499758266407, 'POINT_2_LAT': 56.149807565419565, 'VELOCITY': 13.5}, {'REPORT_ID': '181142', 'DURATION_IN_SEC': 37.0, 'POINT_1_LNG': 10.183499758266407, 'POINT_1_LAT': 56.149807565419565, 'POINT_2_LNG': 10.186762304229774, 'POINT_2_LAT': 56.14563850929, 'VELOCITY': 13.7}, {'REPORT_ID': '189994', 'DURATION_IN_SEC': 56.0, 'POINT_1_LNG': 10.186762304229774, 'POINT_1_LAT': 56.14563850929, 'POINT_2_LNG': 10.186756880950952, 'POINT_2_LAT': 56.14258759218248, 'VELOCITY': 8.0}, {'REPORT_ID': '184729', 'DURATION_IN_SEC': 55.0, 'POINT_1_LNG': 10.186756880950952, 'POINT_1_LAT': 56.14258759218248, 'POINT_2_LNG': 10.179150601188667, 'POINT_2_LAT': 56.13844851575673, 'VELOCITY': 12.0}, {'REPORT_ID': '184675', 'DURATION_IN_SEC': 89.0, 'POINT_1_LNG': 10.179150601188667, 'POINT_1_LAT': 56.13844851575673, 'POINT_2_LNG': 10.166163050262412, 'POINT_2_LAT': 56.131053962866226, 'VELOCITY': 12.9}, {'REPORT_ID': 'WALKING', 'DURATION_IN_SEC': 64.8, 'POINT_1_LNG': 10.166163050262412, 'POINT_1_LAT': 56.131053962866226, 'POINT_2_LNG': 10.164431, 'POINT_2_LAT': 56.130402, 'VELOCITY': 2.0}], 'total_duration': 749.8, 'total_distance': 7405.7, 'average_velocity': 9.9}]

    let map = L.map('map').setView([56.16184, 10.21284], 14);

    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        maxZoom: 19,
    }).addTo(map);

    let currentLayerGroup = null;

    function showRoute(rank) {
        if (currentLayerGroup) {
            currentLayerGroup.clearLayers();
        }

        const route = routes.find(r => r.route_rank === rank);

        if (!route) return;

        document.getElementById('totalDistance').textContent = `${route.total_distance.toFixed(2)} m`;
        document.getElementById('totalDuration').textContent = `${route.total_duration.toFixed(2)} sec`;
        document.getElementById('avgVelocity').textContent = `${route.average_velocity.toFixed(2)} m/s`;

        currentLayerGroup = L.layerGroup();

        const startMarker = L.circleMarker([route.path[0].POINT_1_LAT, route.path[0].POINT_1_LNG], {
            radius: 10,
            color: '#00FF00',
            fillColor: '#00FF00',
            fillOpacity: 0.8
        }).addTo(currentLayerGroup);
        startMarker.bindPopup('Start Point', { className: 'popup' }).openPopup();

        const endMarker = L.circleMarker([route.path[route.path.length - 1].POINT_2_LAT, route.path[route.path.length - 1].POINT_2_LNG], {
            radius: 10,
            color: '#FF0000',
            fillColor: '#FF0000',
            fillOpacity: 0.8
        }).addTo(currentLayerGroup);
        endMarker.bindPopup('End Point', { className: 'popup' }).openPopup();

        route.path.forEach(segment => {
            const { POINT_1_LAT, POINT_1_LNG, POINT_2_LAT, POINT_2_LNG, VELOCITY } = segment;

            const color = getColorBasedOnVelocity(VELOCITY);

            const line = L.polyline([
                [POINT_1_LAT, POINT_1_LNG],
                [POINT_2_LAT, POINT_2_LNG]
            ], {
                color,
                weight: 8, // Thicker lines
                opacity: 1
            }).addTo(currentLayerGroup);

            line.bindPopup(
                `<div class='popup'>
                        <strong>REPORT_ID:</strong> ${segment.REPORT_ID}<br>
                        <strong>VELOCITY:</strong> ${VELOCITY} m/s<br>
                        <strong>DURATION:</strong> ${segment.DURATION_IN_SEC} sec
                    </div>`
            );

            line.on('mouseover', () => {
                line.setStyle({ weight: 12 });
            });

            line.on('mouseout', () => {
                line.setStyle({ weight: 8 });
            });
        });

        currentLayerGroup.addTo(map);
    }

    function getColorBasedOnVelocity(velocity) {
        const opacity = 1 - Math.min(velocity / 15, 1); // Higher velocity = lighter color
        return `rgba(0, 0, 255, ${opacity})`;
    }

    // Load Rank 1 by default
    document.addEventListener('DOMContentLoaded', () => {
        showRoute(1);
        document.getElementById('rank1').classList.add('active');
    });
</script>
</body>
</html>
